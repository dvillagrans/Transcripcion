# üéß Pipeline de Transcripci√≥n de Audio con IA

Pipeline integral de procesamiento de audio que automatiza la transcripci√≥n de archivos largos usando tecnolog√≠as de inteligencia artificial avanzadas. Dise√±ado para manejar audios de hasta 1:30 horas con segmentaci√≥n autom√°tica y seguimiento de progreso en tiempo real.

## ‚ú® Caracter√≠sticas Principales

### üöÄ Transcripci√≥n Avanzada
- **Modelos Whisper Optimizados**: Soporte completo para todos los modelos (tiny, base, small, medium, large-v3)
- **Segmentaci√≥n Inteligente**: Procesa autom√°ticamente audios largos en segmentos de 5 minutos
- **M√∫ltiples Idiomas**: Espa√±ol por defecto con selector de 13+ idiomas
- **Progreso en Tiempo Real**: Visualizaci√≥n detallada del progreso por segmento

### üåç Soporte Multiidioma
- **Idioma por Defecto**: Espa√±ol configurado autom√°ticamente
- **Selector Din√°mico**: Cambio de idioma en tiempo real
- **Auto-detecci√≥n**: Opci√≥n para detectar idioma autom√°ticamente
- **Idiomas Soportados**: Espa√±ol, Ingl√©s, Franc√©s, Alem√°n, Italiano, Portugu√©s, Ruso, Japon√©s, Coreano, Chino, √Årabe, Hindi

### üéØ Interfaz Moderna
- **UI Intuitiva**: Dise√±o moderno con animaciones suaves
- **Drag & Drop**: Arrastra archivos directamente
- **Progreso Visual**: Barras de progreso y grids de segmentos
- **Responsive**: Optimizado para desktop y m√≥vil

### ‚ö° Rendimiento Optimizado
- **CPU Robusto**: Modo ROBUST_MODE para m√°xima estabilidad
- **Limpieza Autom√°tica**: Los archivos temporales se eliminan autom√°ticamente
- **Timeout Inteligente**: Timeouts din√°micos basados en el tama√±o del archivo
- **Gesti√≥n de Memoria**: Procesamiento eficiente de archivos grandes

## üõ†Ô∏è Stack Tecnol√≥gico

### Frontend
- **React 18** + TypeScript
- **Tailwind CSS** + shadcn/ui
- **Vite** para build optimizado
- **Lucide React** para iconograf√≠a
- **React Router** para navegaci√≥n

### Backend
- **Express.js** + TypeScript
- **PostgreSQL** (puerto 5433)
- **Redis** (puerto 6380)
- **Multer** para uploads
- **Axios** para comunicaci√≥n con servicios

### AI & Processing
- **Faster-Whisper** para transcripci√≥n
- **NumPy** para procesamiento de audio
- **Librosa/SoundFile** para manipulaci√≥n de audio
- **Python 3.12** con virtual environment

### Infrastructure
- **Docker Compose** para servicios
- **Auto-detecci√≥n** de comandos Docker
- **Scripts automatizados** para setup

## üìã Requisitos del Sistema

- **Node.js** 18+ y **pnpm**
- **Python** 3.12+ con pip
- **Docker** y **Docker Compose**
- **8GB RAM** m√≠nimo (16GB recomendado)
- **GPU** opcional (CUDA compatible)

## üöÄ Instalaci√≥n R√°pida

### üéØ M√©todo 1: Setup Autom√°tico (Recomendado)

```bash
# Clonar repositorio
git clone https://github.com/dvillagrans/Transcripcion.git
cd Transcripcion

# Windows
start_all.bat

# Linux/Mac
python start_all.py
```

### ‚öôÔ∏è M√©todo 2: Instalaci√≥n Manual

#### 1. Configurar Python
```bash
# Crear entorno virtual
python3 -m venv env
source env/bin/activate  # Linux/Mac
# env\Scripts\activate   # Windows

# Instalar dependencias Python
pip install -r requirements.txt
```

#### 2. Configurar Node.js
```bash
# Backend
pnpm install

# Frontend
cd frontend && pnpm install && cd ..
```

#### 3. Iniciar Servicios
```bash
# Docker (PostgreSQL + Redis)
docker-compose up -d

# Backend API (puerto 3001)
pnpm run server:dev

# Frontend (puerto 3000)
cd frontend && pnpm run dev

# Servicio Python (puerto 5000)
python transcription_service.py
```

## üåê Acceso a la Aplicaci√≥n

| Servicio | URL | Puerto |
|----------|-----|---------|
| **Frontend** | http://localhost:3000 | 3000 |
| **Backend API** | http://localhost:3001 | 3001 |
| **Python Service** | http://localhost:5000 | 5000 |
| **PostgreSQL** | localhost:5433 | 5433 |
| **Redis** | localhost:6380 | 6380 |

## üìÅ Estructura del Proyecto

```
Transcripcion/
‚îú‚îÄ‚îÄ üé® frontend/              # React + TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/       # Componentes UI
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/          # shadcn/ui components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LanguageSelector.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SegmentProgressDisplay.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Progress.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/           # P√°ginas principales
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProcessPage.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfigPage.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ResultsPage.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HistoryPage.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.ts
‚îú‚îÄ‚îÄ üîß api/                   # Express.js Backend
‚îÇ   ‚îú‚îÄ‚îÄ config/              # DB y Redis
‚îÇ   ‚îú‚îÄ‚îÄ models/              # Modelos TypeScript
‚îÇ   ‚îú‚îÄ‚îÄ routes/              # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ services/            # L√≥gica de negocio
‚îÇ   ‚îî‚îÄ‚îÄ app.ts
‚îú‚îÄ‚îÄ üêç Python Services
‚îÇ   ‚îú‚îÄ‚îÄ transcription_service.py  # Servicio principal
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt          # Dependencias Python
‚îÇ   ‚îî‚îÄ‚îÄ env/                      # Virtual environment
‚îú‚îÄ‚îÄ üìÇ Directorios de Datos
‚îÇ   ‚îú‚îÄ‚îÄ uploads/             # Archivos subidos
‚îÇ   ‚îú‚îÄ‚îÄ segments/            # Segmentos temporales
‚îÇ   ‚îî‚îÄ‚îÄ models/              # Modelos Whisper
‚îú‚îÄ‚îÄ üê≥ Docker
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml   # Servicios
‚îÇ   ‚îî‚îÄ‚îÄ init.sql            # Setup DB
‚îî‚îÄ‚îÄ üìù Configuraci√≥n
    ‚îú‚îÄ‚îÄ .env                # Variables de entorno
    ‚îú‚îÄ‚îÄ .gitignore          # Archivos ignorados
    ‚îî‚îÄ‚îÄ README.md           # Este archivo
```

## üéØ Gu√≠a de Uso

### 1. üéõÔ∏è Configuraci√≥n Inicial
![Config](https://img.shields.io/badge/Paso-1-blue)

- Ve a **Configuraci√≥n** (`/config`)
- Selecciona el **modelo Whisper** seg√∫n tus necesidades:
  - `tiny`: Ultra r√°pido ‚ö°‚ö°‚ö° (precisi√≥n ‚≠ê‚≠ê)
  - `medium`: **Recomendado** ‚ö° (precisi√≥n ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê)
  - `large-v3`: M√°xima precisi√≥n ‚ö° (precisi√≥n ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê)
- Configura el **idioma por defecto** (Espa√±ol preconfigurado)
- Activa/desactiva **resumen autom√°tico**

### 2. üéµ Subir Audio
![Process](https://img.shields.io/badge/Paso-2-green)

- Ve a **Procesar** (`/process`)
- **Arrastra y suelta** o **selecciona archivo**
- Formatos: `MP3`, `WAV`, `FLAC`, `M4A`, `OGG`
- Tama√±o m√°ximo: **500MB** (optimizado para audios de 1:30h)
- Selecciona **idioma espec√≠fico** si es necesario

### 3. üìä Monitoreo en Tiempo Real
![Progress](https://img.shields.io/badge/Paso-3-orange)

Para **audios largos** (>10 minutos):
- ‚úÖ **Segmentaci√≥n autom√°tica** en bloques de 5 minutos
- üìä **Grid visual** mostrando cada segmento
- ‚è±Ô∏è **Tiempo estimado** de finalizaci√≥n
- üîÑ **Progreso por segmento** en tiempo real
- üìà **Estad√≠sticas t√©cnicas** detalladas

### 4. üìã Resultados
![Results](https://img.shields.io/badge/Paso-4-purple)

- üìù **Transcripci√≥n completa** y precisa
- üìÑ **Resumen autom√°tico** (si est√° activado)
- üíæ **Descarga** en m√∫ltiples formatos
- üìã **Copia r√°pida** al portapapeles
- üîç **B√∫squeda** dentro del texto

### 5. üìö Historial
![History](https://img.shields.io/badge/Paso-5-indigo)

- üìú **Lista completa** de transcripciones
- üîç **B√∫squeda r√°pida** por nombre
- üóëÔ∏è **Eliminaci√≥n** de trabajos antiguos
- üìä **Estado** de cada procesamiento

## üöÄ Caracter√≠sticas Avanzadas

### üß© Segmentaci√≥n Inteligente

```python
# Autom√°tico para audios >10 minutos
if audio_duration > 600:  # 10 minutos
    segments = segment_audio(file_path, segment_length=300)  # 5 min c/u
    
# Ejemplo: Audio de 1:30h = 18 segmentos de 5 minutos
```

### üåç Soporte Multiidioma

```typescript
const languages = [
  { code: 'es', name: 'Espa√±ol' },        // Por defecto
  { code: 'en', name: 'English' },
  { code: 'fr', name: 'Fran√ßais' },
  { code: 'de', name: 'Deutsch' },
  { code: 'auto', name: 'Auto-detectar' }
  // ... 13+ idiomas soportados
];
```

### üìä Progreso Detallado

```typescript
interface ProgressData {
  segments_total: number;
  segments_completed: number;
  current_segment: number;
  estimated_time_remaining: string;
  processing_speed: string;
  technical_info: TechnicalInfo;
}
```

## üîß API Reference

### üéµ Audio Processing

#### Upload Audio
```bash
POST /api/audio/upload
Content-Type: multipart/form-data

{
  "audioFile": File,
  "whisperModel": "medium",
  "language": "es",
  "generateSummary": true
}
```

#### Get Progress
```bash
GET /api/audio/status/:jobId

Response:
{
  "success": true,
  "data": {
    "jobId": "uuid",
    "status": "processing",
    "progress": 45,
    "currentStage": "Procesando segmento 3/12",
    "segments": {...}
  }
}
```

#### Get Results
```bash
GET /api/audio/results/:jobId

Response:
{
  "success": true,
  "data": {
    "transcription": "Texto completo...",
    "summary": "Resumen autom√°tico...",
    "metadata": {
      "duration": "5400s",
      "language": "es",
      "model": "medium"
    }
  }
}
```

### üêç Python Service

#### Transcribe Endpoint
```bash
POST http://localhost:5000/transcribe

{
  "file_path": "/path/to/audio.mp3",
  "model": "medium",
  "language": "es",
  "job_id": "uuid"
}
```

#### Progress Endpoint
```bash
GET http://localhost:5000/progress/:jobId

Response:
{
  "progress": 45,
  "stage": "Transcribiendo segmento 3/12",
  "segments_completed": 2,
  "segments_total": 12,
  "estimated_time": "15:30"
}
```

## ‚öôÔ∏è Configuraci√≥n Avanzada

### üîß Variables de Entorno

```bash
# === DATABASE ===
DB_HOST=localhost
DB_PORT=5433
DB_NAME=audio_pipeline
DB_USER=app_user
DB_PASSWORD=secure_password

# === REDIS ===
REDIS_HOST=localhost
REDIS_PORT=6380

# === SERVER ===
PORT=3001
NODE_ENV=development
TRANSCRIPTION_SERVICE_URL=http://localhost:5000

# === UPLOAD ===
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=524288000  # 500MB

# === AI CONFIG ===
ROBUST_MODE=true
DEFAULT_MODEL=medium
DEFAULT_LANGUAGE=es
```

### üéõÔ∏è Configuraci√≥n de Modelos

| Modelo | Tama√±o | Velocidad | Precisi√≥n | RAM | Recomendado Para |
|--------|--------|-----------|-----------|-----|------------------|
| `tiny` | 39MB | ‚ö°‚ö°‚ö° | ‚≠ê‚≠ê | 1GB | Pruebas r√°pidas |
| `base` | 74MB | ‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê | 1GB | Desarrollo |
| `small` | 244MB | ‚ö°‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê | 2GB | Uso general |
| `medium` | 769MB | ‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 5GB | **Recomendado** |
| `large-v3` | 1550MB | ‚ö° | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | 10GB | M√°xima calidad |

## üêõ Soluci√≥n de Problemas

### ‚ùå Problemas Comunes

#### Docker no inicia
```bash
# Verificar Docker
docker --version
docker-compose --version

# Reiniciar servicios
docker-compose down
docker-compose up -d --force-recreate
```

#### Error de Python/Whisper
```bash
# Verificar entorno virtual
source env/bin/activate
pip list | grep -E "(torch|whisper|faster)"

# Reinstalar dependencias
pip install -r requirements.txt --force-reinstall
```

#### Error de puertos en uso
```bash
# Verificar puertos
netstat -tulpn | grep -E "(3000|3001|5000|5433|6380)"

# Cambiar puertos en .env
PORT=3002
DB_PORT=5434
```

#### Segmentos no se limpian
```bash
# Limpiar manualmente
rm -rf segments/*
```

### üîç Logs de Debug

```bash
# Backend logs
cd frontend && pnpm run dev  # Terminal 1
pnpm run server:dev          # Terminal 2

# Python logs
tail -f transcription.log    # Terminal 3

# Docker logs
docker-compose logs postgres
docker-compose logs redis
```

## üìä Benchmarks y Rendimiento

### ‚è±Ô∏è Tiempos de Procesamiento (CPU Intel i7)

| Duraci√≥n Audio | Modelo | Segmentos | Tiempo Procesamiento |
|----------------|--------|-----------|---------------------|
| 5 minutos | medium | 1 | ~2 minutos |
| 30 minutos | medium | 6 | ~10 minutos |
| 1 hora | medium | 12 | ~18 minutos |
| 1:30 horas | medium | 18 | ~25 minutos |

### üíæ Uso de Recursos

- **RAM**: 4-8GB (dependiendo del modelo)
- **CPU**: Uso intensivo durante transcripci√≥n
- **Disco**: ~2GB para modelos + archivos temporales
- **Red**: M√≠nimo (solo para UI)

## üîÑ Roadmap Futuro

### üéØ Pr√≥ximas Versiones

#### v2.0 - An√°lisis Avanzado
- [ ] **Diarizaci√≥n de hablantes** (¬øQui√©n dice qu√©?)
- [ ] **Detecci√≥n de emociones** en el audio
- [ ] **An√°lisis de sentimientos** del texto
- [ ] **Extracci√≥n de temas** principales

#### v2.1 - Productividad
- [ ] **Traducci√≥n autom√°tica** (SeamlessM4T)
- [ ] **Generaci√≥n de res√∫menes** con Llama 3.1
- [ ] **Exportaci√≥n a LaTeX/PDF** profesional
- [ ] **API Keys** para modelos cloud

#### v2.2 - Escalabilidad
- [ ] **Procesamiento distribuido** multi-GPU
- [ ] **Queue system** para m√∫ltiples archivos
- [ ] **Autenticaci√≥n** y usuarios
- [ ] **Dashboard analytics** avanzado

## üìÑ Licencia

Este proyecto est√° bajo la **Licencia MIT**.

```
MIT License - Copyright (c) 2025 dvillagrans

Se permite el uso, copia, modificaci√≥n y distribuci√≥n de este software
para cualquier prop√≥sito, comercial o no comercial.
```

## ü§ù Contribuciones

¬°Las contribuciones son bienvenidas! 

### üîÑ Proceso de Contribuci√≥n

1. **Fork** el repositorio
2. **Crea** una rama feature (`git checkout -b feature/nueva-funcionalidad`)
3. **Commit** tus cambios (`git commit -m 'Agregar nueva funcionalidad'`)
4. **Push** a la rama (`git push origin feature/nueva-funcionalidad`)
5. **Abre** un Pull Request

### üêõ Reportar Bugs

Usa los **GitHub Issues** con la plantilla:
- üêõ **Descripci√≥n** del problema
- üîÑ **Pasos** para reproducir
- üíª **Entorno** (OS, Node.js version, etc.)
- üì∏ **Screenshots** si aplica

## üìû Soporte y Contacto

- üí¨ **Issues**: [GitHub Issues](https://github.com/dvillagrans/Transcripcion/issues)
- üìß **Email**: dvillagrans@example.com
- üê¶ **Twitter**: @dvillagrans

---

<div align="center">

**‚≠ê Si te gusta este proyecto, no olvides darle una estrella ‚≠ê**

[![GitHub stars](https://img.shields.io/github/stars/dvillagrans/Transcripcion)](https://github.com/dvillagrans/Transcripcion/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/dvillagrans/Transcripcion)](https://github.com/dvillagrans/Transcripcion/network)
[![GitHub issues](https://img.shields.io/github/issues/dvillagrans/Transcripcion)](https://github.com/dvillagrans/Transcripcion/issues)

**Desarrollado con ‚ù§Ô∏è usando IA y tecnolog√≠as modernas**

</div>